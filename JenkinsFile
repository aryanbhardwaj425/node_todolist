pipeline {
    agent any

    stages {
        stage('Install Dependencies') {
            steps {
                sh 'npm install'
            }
        }

        stage('Run React Project') {
            steps {
                // Start the React development server in the background
                echo "Starting React development server..."
                sh 'npm start &'
                
                // Wait for the development server to be ready (optional sleep)
                echo "Waiting for server to start..."
                
                echo "React server is likely running on port 3000 by default, unless specified otherwise in the .env file"
                input message: 'Finished using the web site? (Click "Proceed" to continue)'
            }
        }

        stage('Deliver') {
            steps {
                sh './jenkins/scripts/deliver.sh'
            }
        }
    }

    post {
        always {
            echo 'Pipeline finished'
        }
    }
}

